<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_session_tickets_template">
        <t t-call="web.html_container">
            <t t-set="company" t-value="res_company"/>
            <t t-foreach="docs" t-as="o">
                <t t-set="qty" t-value="o.tickets_qty or 50"/>
                <t t-foreach="range(qty)" t-as="n">
                    <div class="page" style="page-break-after: always; height: 50mm; width: 200mm; margin: 0; padding: 0; position: relative; background: #f5f5f5; border: 2px solid #333;">
                        <!-- Logo fallback -->
                        <div style="position: absolute; top: 1mm; left: 2mm; font-family: Arial; font-weight: bold; color: #0066cc; font-size: 11pt;">
                            <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="height: 13mm;"/>
                            <t t-else=""><span>FEDERACION<br/>NATACION</span></t>
                        </div>

                        <!-- Título/fecha -->
                        <div style="position: absolute; top: 1mm; left: 22mm; right: 28mm; text-align: center; font-family: Arial; font-size: 8pt; font-weight: bold; line-height: 1.2; color: #000;">
                            <t t-out="o.championship_id.name or 'CAMPEONATO NATACION'"/>
                            <br t-if="o.name"/><t t-out="o.name or ''"/>
                            <br/><t t-out="o.date.strftime('%d/%m/%Y %H:%M') if o.date else 'FECHA SESION'"/>
                        </div>

                        <!-- Número -->
                        <div style="position: absolute; top: 17mm; left: 20mm; right: 20mm; bottom: 16mm; display: flex; align-items: center; justify-content: center; font-family: Arial; font-size: 32pt; font-weight: bold; color: #0066cc;">
                            <t t-out="str(n+1).zfill(3)"/>
                        </div>

                        <!-- Texto -->
                        <div style="position: absolute; bottom: 9mm; left: 3mm; right: 30mm; font-family: Arial; font-size: 7.5pt; color: #000; font-weight: bold; text-align: center;">
                            <t t-out="'ENTRADA GRATUITA - VALIDA SOLO ESTA SESION'"/>
                        </div>

                        <!-- QR -->
                        <div style="position: absolute; bottom: 2mm; right: 2mm; width: 25mm; height: 25mm; border: 2px solid #000; background: white;">
                            <img t-att-src="'/report/barcode/?type=QR&amp;value=session_%s_ticket_%s' % (o.id, n+1)" style="width: 100%; height: 100%;"/>
                            <div t-if="False" style="font-size: 4pt; text-align: center; color: #999;">S<span t-out="o.id"/><br/>T<span t-out="n+1"/></div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>