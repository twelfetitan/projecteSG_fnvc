<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_session_tickets_template">
        <t t-call="web.html_container">
            <t t-set="base_url" t-value="env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
            <t t-foreach="docs" t-as="o">
                <t t-set="company" t-value="res_company"/>
                <t t-set="qty" t-value="o.tickets_qty or 50"/>
                <t t-foreach="range(qty)" t-as="n">
                    <div class="page" style="height: 40mm; width: 100mm; margin: 0; padding: 3mm; font-family: 'Helvetica', 'Arial', sans-serif; background: #fff; page-break-after: always; border-bottom: 0.1mm dashed #ccc;">
                        <table style="width: 100%; border-collapse: collapse; height: 34mm;">
                            <!-- Header Row -->
                            <tr>
                                <td style="width: 30mm; vertical-align: middle; padding-bottom: 2mm; border-bottom: 1.5mm solid #0066cc;">
                                    <img t-if="company.logo" t-attf-src="data:image/*;base64,{{company.logo}}" style="max-height: 12mm; max-width: 28mm;"/>
                                </td>
                                <td style="vertical-align: middle; text-align: right; padding-bottom: 2mm; border-bottom: 1.5mm solid #0066cc;">
                                    <div style="font-size: 10pt; font-weight: bold; color: #000; text-transform: uppercase;">
                                        <t t-out="company.name"/>
                                    </div>
                                    <div style="font-size: 8pt; color: #666;">
                                        Federación de Natación
                                    </div>
                                </td>
                            </tr>
                            <!-- Main Content Row -->
                            <tr>
                                <td style="padding-top: 3mm; vertical-align: top;">
                                    <div style="font-size: 12pt; font-weight: bold; color: #0066cc;">
                                        <t t-out="o.name or 'SESIÓN'"/>
                                    </div>
                                    <div style="font-size: 9pt; color: #333; margin-top: 1mm;">
                                        <t t-out="o.date.strftime('%d/%m/%Y %H:%M') if o.date else ''"/>
                                    </div>
                                    <div style="margin-top: 4mm; border-top: 0.2mm solid #eee; padding-top: 2mm;">
                                        <div style="font-size: 8pt; font-weight: bold; text-transform: uppercase; color: #444;">
                                            ENTRADA DE ACCESO
                                        </div>
                                        <div style="font-size: 6pt; color: #999;">
                                            Válida únicamente para la sesión y fecha indicada.
                                        </div>
                                    </div>
                                </td>
                                <td style="padding-top: 3mm; text-align: right; vertical-align: top;">
                                    <div style="display: inline-block; text-align: center;">
                                        <div style="font-size: 28pt; font-weight: 900; color: #0066cc; line-height: 1; margin-bottom: 2mm;">
                                            <t t-out="str(n+1).zfill(3)"/>
                                        </div>
                                        <div style="padding: 1mm; border: 0.4mm solid #0066cc; border-radius: 2mm; background: #fff;">
                                            <img t-att-src="base_url + '/report/barcode/QR/Session_' + str(o.id) + '_Ticket_' + str(n+1)" style="width: 18mm; height: 18mm; display: block;"/>
                                        </div>
                                        <div style="font-size: 5pt; color: #ccc; margin-top: 1mm; font-family: monospace;">
                                            VERIF: ID-<t t-out="o.id"/>-T<t t-out="n+1"/>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>