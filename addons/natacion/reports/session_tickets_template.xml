<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_session_tickets_template">
        <t t-call="web.html_container">
            <t t-set="company" t-value="user.company_id"/>
            <t t-foreach="docs" t-as="o">
                <t t-set="qty" t-value="o.tickets_qty or 50"/>
                <t t-foreach="range(qty)" t-as="n">
                    <div class="page" style="
                        page-break-after: always !important;
                        -webkit-page-break-after: always !important;
                        page-break-inside: avoid !important;
                        -webkit-page-break-inside: avoid !important;
                        height: 50mm !important;
                        width: 200mm !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        position: relative !important;
                        background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%) !important;
                        border-radius: 8mm !important;
                        box-shadow: 0 4mm 8mm rgba(0,0,0,0.3) !important;
                    ">
                        <!-- Logo federación/empresa superior izquierda -->
                        <img t-if="company.logo"
                             t-att-src="'data:image/png;base64,' + (company.logo.decode('ascii') if isinstance(company.logo, bytes) else company.logo)"
                             style="
                                position: absolute !important;
                                top: 2mm !important;
                                left: 3mm !important;
                                height: 12mm !important;
                                width: auto !important;
                                z-index: 10 !important;
                             "/>

                        <!-- Info sesión superior centro -->
                        <div style="
                            position: absolute !important;
                            top: 2mm !important;
                            left: 20mm !important;
                            right: 30mm !important;
                            text-align: center !important;
                            font-family: 'Arial Black', Arial, sans-serif !important;
                            font-size: 8pt !important;
                            color: #000 !important;
                            font-weight: bold !important;
                            line-height: 1.1 !important;
                        ">
                            <div t-esc="o.championship_id.name or 'Campeonato de Natación'"/>
                            <div t-esc="o.name"/>
                            <div t-esc="o.date.strftime('%d/%m/%Y %H:%M')"/>
                        </div>

                        <!-- Número de entrada grande centro -->
                        <div style="
                            position: absolute !important;
                            top: 18mm !important;
                            left: 0 !important;
                            right: 0 !important;
                            bottom: 15mm !important;
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            font-family: 'Arial Black', Arial, sans-serif !important;
                            font-size: 36pt !important;
                            font-weight: 900 !important;
                            color: #FFF !important;
                            text-shadow: 2px 2px 4px rgba(0,0,0,0.5) !important;
                            text-align: center !important;
                            letter-spacing: 2px !important;
                        ">
                            <span t-esc="str(n+1).zfill(3)"/>
                        </div>

                        <!-- Texto inferior -->
                        <div style="
                            position: absolute !important;
                            bottom: 8mm !important;
                            left: 3mm !important;
                            font-family: Arial, sans-serif !important;
                            font-size: 7pt !important;
                            color: #000 !important;
                            font-weight: bold !important;
                        ">
                            Entrada Gratuita • Válida solo para esta sesión
                        </div>

                        <!-- QR inferior derecha -->
                        <div style="
                            position: absolute !important;
                            bottom: 2mm !important;
                            right: 3mm !important;
                        ">
                            <img t-att-src="'/report/barcode/?type=QR&amp;value=session_' + str(o.id) + '_ticket_' + str(n+1) + '&amp;width=256&amp;height=256&amp;humanreadable=0'"
                                 style="
                                    width: 22mm !important;
                                    height: 22mm !important;
                                    border: 2px solid #000 !important;
                                    border-radius: 3mm !important;
                                 "/>
                        </div>

                        <!-- Borde exterior -->
                        <div style="
                            position: absolute !important;
                            top: 1mm !important;
                            left: 1mm !important;
                            right: 1mm !important;
                            bottom: 1mm !important;
                            border: 3px solid #000 !important;
                            border-radius: 6mm !important;
                            box-sizing: border-box !important;
                            pointer-events: none !important;
                        "></div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
